<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoMate - Waste Management Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .info-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .info-section h2 {
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .waste-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .waste-card {
            background: linear-gradient(45deg, #48bb78, #38a169);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .waste-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .waste-card h3 {
            margin-bottom: 10px;
        }

        .chatbot-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            height: 600px;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }

        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            background: #f7fafc;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .message {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 20px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .user-message {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }

        .bot-message {
            background: #e2e8f0;
            color: #2d3748;
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }

        .input-container {
            display: flex;
            gap: 10px;
        }

        .message-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .message-input:focus {
            border-color: #667eea;
        }

        .send-btn {
            background: linear-gradient(45deg, #48bb78, #38a169);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: transform 0.2s ease;
        }

        .send-btn:hover {
            transform: scale(1.05);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .sdg-info {
            background: linear-gradient(45deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .waste-types {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>EcoMate</h1>
            <p>AI-Powered Waste Management Assistant</p>
        </div>

        <div class="main-content">
            <div class="info-section">
                <h2>About Waste Management</h2>
                <p>Proper waste management is crucial for environmental sustainability. Different types of waste require different disposal methods to minimize environmental impact and maximize resource recovery.</p>
                
                <div class="waste-types">
                    <div class="waste-card" onclick="askAboutWaste('plastic')">
                        <h3>Plastic Waste</h3>
                        <p>Bottles, containers, packaging</p>
                    </div>
                    <div class="waste-card" onclick="askAboutWaste('organic')">
                        <h3>Organic Waste</h3>
                        <p>Food scraps, garden waste</p>
                    </div>
                    <div class="waste-card" onclick="askAboutWaste('paper')">
                        <h3>Paper Waste</h3>
                        <p>Newspapers, cardboard, books</p>
                    </div>
                    <div class="waste-card" onclick="askAboutWaste('electronic')">
                        <h3>E-Waste</h3>
                        <p>Electronics, batteries</p>
                    </div>
                    <div class="waste-card" onclick="askAboutWaste('glass')">
                        <h3>Glass Waste</h3>
                        <p>Bottles, jars, containers</p>
                    </div>
                    <div class="waste-card" onclick="askAboutWaste('metal')">
                        <h3>Metal Waste</h3>
                        <p>Cans, foil, scrap metal</p>
                    </div>
                </div>

                <div class="sdg-info">
                    <h3>Supporting SDG 12</h3>
                    <p>Responsible Consumption and Production</p>
                </div>
            </div>

            <div class="chatbot-section">
                <div class="chat-header">
                    <h2>Ask EcoMate Assistant</h2>
                    <p>Get personalized waste disposal advice</p>
                </div>
                
                <div class="chat-container" id="chatContainer">
                    <div class="message bot-message">
                        Hello! I'm EcoMate, your AI waste management assistant. Tell me about any waste item, and I'll help you dispose of it properly while supporting sustainable practices. What would you like to know about?
                    </div>
                </div>
                
                <div class="input-container">
                    <input 
                        type="text" 
                        class="message-input" 
                        id="messageInput" 
                        placeholder="Describe your waste item (e.g., 'plastic bottle', 'food scraps')..."
                        onkeypress="handleKeyPress(event)"
                    >
                    <button class="send-btn" id="sendBtn" onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const API_KEY = "AIzaSyDFsgn7EmLeg0aEnRdlyu8TunNSWUBvxBg";
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${API_KEY}`;

        // Waste management knowledge base for context
        const wasteContext = `
        You are EcoMate, an AI waste management assistant. Your role is to help users properly dispose of waste items while promoting sustainable practices and supporting SDG 12 (Responsible Consumption and Production).

        When users ask about waste disposal, provide:
        1. Specific disposal method (recycle, compost, landfill, special disposal)
        2. Local considerations and tips
        3. Environmental impact information
        4. Ways to reduce or reuse when possible
        5. Connection to SDG 12 principles

        Common waste categories and disposal:
        - Plastic: Most recyclable if clean, check local numbers (1-7)
        - Organic: Compostable, reduces methane emissions
        - Paper: Recyclable when clean and dry
        - Glass: Infinitely recyclable, separate by color
        - Metal: Highly recyclable, valuable resource recovery
        - Electronics: Special e-waste recycling, contains valuable metals
        - Hazardous: Paint, chemicals, batteries - special disposal required

        Always be helpful, educational, and promote environmental consciousness.
        `;

        async function callGeminiAPI(message) {
            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: wasteContext + "\n\nUser question: " + message
                            }]
                        }],
                        generationConfig: {
                            temperature: 0.7,
                            topK: 40,
                            topP: 0.95,
                            maxOutputTokens: 500,
                        }
                    })
                });

                const data = await response.json();
                
                if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                    return data.candidates[0].content.parts[0].text;
                } else {
                    throw new Error('Invalid response format');
                }
            } catch (error) {
                console.error('API Error:', error);
                return "I apologize, but I'm having trouble connecting to my knowledge base right now. For general waste disposal: Recycle clean plastics, metals, paper, and glass. Compost organic waste. Dispose of electronics at e-waste centers. Always check your local recycling guidelines for specific rules.";
            }
        }

        function addMessage(message, isUser = false) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            messageDiv.textContent = message;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function showLoading() {
            const chatContainer = document.getElementById('chatContainer');
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'message bot-message';
            loadingDiv.id = 'loadingMessage';
            loadingDiv.innerHTML = '<div class="loading"></div> Thinking...';
            chatContainer.appendChild(loadingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function hideLoading() {
            const loadingMessage = document.getElementById('loadingMessage');
            if (loadingMessage) {
                loadingMessage.remove();
            }
        }

        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const sendBtn = document.getElementById('sendBtn');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Disable input and button
            input.disabled = true;
            sendBtn.disabled = true;
            
            // Add user message
            addMessage(message, true);
            
            // Clear input
            input.value = '';
            
            // Show loading
            showLoading();
            
            try {
                // Get AI response
                const response = await callGeminiAPI(message);
                
                // Hide loading and show response
                hideLoading();
                addMessage(response);
            } catch (error) {
                hideLoading();
                addMessage("I'm sorry, I encountered an error. Please try again.");
            } finally {
                // Re-enable input and button
                input.disabled = false;
                sendBtn.disabled = false;
                input.focus();
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function askAboutWaste(wasteType) {
            const input = document.getElementById('messageInput');
            input.value = `How should I dispose of ${wasteType} waste?`;
            input.focus();
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('messageInput').focus();
        });
    </script>
</body>
</html>